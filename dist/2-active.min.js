function togglePasswordVisibility(e,t){e.addEventListener("click",()=>{const n="password"===t.getAttribute("type")?"text":"password";t.setAttribute("type",n),e.classList.toggle("open")})}function wait(e){for(var t=(new Date).getTime(),n=t;n<t+e;)n=(new Date).getTime()}function hidesplash(){try{document.getElementById("splash").classList.add("hide")}catch{}}function deactivate(){try{const e=document.getElementsByClassName("active");for(const t of e)t.classList.remove("active")}catch{}}function parseMenu(e){e=e.trim(),document.getElementById("footer").innerText="";const t=e.split("\n");var n,o,s="x",i="";t.forEach(e=>{const t=e.split(",");let c,a,d;c=t[0].trim(),a=t[1].trim(),d=t[2].trim(),n="</details>",o=d.charAt(0),null==c||""===c||("c"===o&&(i+="<a id='"+c+"' class='menuitem font-color-two text-decoration-color' href='#'>"+a+"</a>"),"o"===o&&"c"!==s&&(i+="<a id='"+c+"' class='menuitem font-color-two text-decoration-color' href='#'>"+a+"</a>"),"o"===o&&"c"===s&&(i+=n+"<a id='"+c+"' class='menuitem font-color-two text-decoration-color' href='#'>"+a+"</a>"),"p"===o&&"c"!==s&&(i+="<details><summary>"+a+"</summary>"),"p"===o&&"c"===s&&(i+=n+"<details><summary>"+a+"</summary>"),s=o),document.getElementById("items").innerHTML="<div id='menu' class='sidebar fakecontent'>"+i+"</div>";try{let e=document.querySelectorAll(".menuitem");e.forEach(function(e){e.addEventListener("click",function(){saveem(this.id,"regular")})})}catch{console.log("event listeners not loaded as no file")}})}function getMarkdown(e){fetch(e).then(e=>{if(!e.ok)throw new Error("Failed to fetch the main file. Response status: "+e.status);return e.text()}).then(e=>{if(localStorage.setItem("papEmbeddedMenu",""),document.getElementById("i1").classList.remove("error-red"),isBase64(e))try{decrypt(e,localStorage.getItem("papEkey"))}catch{document.getElementById("i1").classList.add("error-red")}const t=e.indexOf("{");if(-1!==t&&t>0){const n=e.substring(0,t),o=e.substring(t);console.log("Extracted Text:",n),e=o,localStorage.setItem("papEmbeddedMenu",n),parseMenu(n)}else-1===t?console.log("No opening brace '{' found in the input string."):console.log("No text found before the first '{' character.");const n=convertToHtml(e),o=document.getElementById("niv-text");o.innerHTML=n,document.getElementById("footer").innerText="";const s=n.split(/\s+/).filter(e=>""!==e),i=s.length,c=n.split(/[.!?]+/).filter(e=>""!==e),a=c.length,d=n.split(/\n\s*\n/).filter(e=>""!==e),r=(d.length,200),l=i/r,m=Math.ceil(l);document.getElementById("statistics").innerText="Words "+i+" Sentences "+a+" Reading time "+m+" minutes"}).catch(()=>{document.getElementById("niv-text").innerHTML="<div class='file-not-found'>Markdown file not loaded</div>",document.getElementById("settings").classList.remove("hide"),document.getElementById("i1").classList.add("error-red")});let t=document.querySelectorAll(".menuitem");t.forEach(function(e){e.addEventListener("click",function(){saveem(this.id,"regular")})})}function convertToHtml(e){const t=e,n=new window.markdownit,o=n.render(t);return html=markdownPlus(o,"main"),html}async function saveem(e,t){hidesplash(),document.getElementById("thesettings").classList.add("hide");const n=document.getElementsByClassName("showme");for(const e of n)e.classList.add("hideme"),e.classList.remove("showme");var o=localStorage.getItem("_view");if(("mobile"==o||"crx"==o)&&"scroll"!=t){var s=document.getElementById("burgercontainer"),i=document.querySelector(".item2");s.classList.contains("change")?(s.classList.remove("change"),i.classList.add("hide")):(i.classList.remove("hide"),s.classList.add("change"))}deactivate();var c=document.getElementById(e);try{c.classList.add("active")}catch{}c=document.getElementById("t"+e);try{c.className="showme";var a=new Date;localStorage.setItem(e,a)}catch{}}togglePasswordVisibility(document.getElementById("e1"),document.querySelector("#i5")),togglePasswordVisibility(document.getElementById("e2"),document.querySelector("#new-pwd")),getMarkdown(localStorage.getItem("pap"));var burgerbutton=document.getElementById("burgercontainer"),menudiv=document.querySelector(".item2");burgerbutton.onclick=function(){var e=document.getElementById("burgercontainer"),t=document.querySelector(".item2");e.classList.contains("change")?(e.classList.remove("change"),t.classList.add("hide")):(t.classList.remove("hide"),e.classList.add("change"))};var reloadbutton=document.getElementById("reload");reloadbutton.onclick=function(){localStorage.setItem("papName","");const e=window.location.origin+window.location.pathname;window.location.href=e},document.addEventListener("DOMContentLoaded",function(e){document.querySelectorAll("img").forEach(function(e){e.onerror=function(){this.style.display="none"}})});var helpbutton=document.getElementById("help");helpbutton.onclick=function(){document.getElementById("namer").innerText="HELP",document.getElementById("footer").innerText="",document.getElementById("thesettings").classList.add("hide"),document.getElementById("refresher").classList.remove("icon-hide"),document.getElementById("the-options").classList.remove("icon-hide"),document.getElementById("the-sandbox").classList.remove("icon-hide"),document.getElementById("setting-items").classList.add("hide"),getMarkdown("help.md"),document.getElementById("splash").innerHTML="";try{document.getElementById("splash").classList.remove("hide")}catch{console.log("No splash exists")}},document.addEventListener("animationstart",function(e){"fade-in"===e.animationName&&e.target.classList.add("did-fade-in")}),document.addEventListener("animationend",function(e){"fade-out"===e.animationName&&e.target.classList.remove("did-fade-in")}),document.onreadystatechange=function(){"complete"==document.readyState&&setTimeout(function(){document.getElementById("loader").style.display="none"},100)};