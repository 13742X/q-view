function handleClick(){document.getElementById("savecontainer").classList.remove("hide");const e=document.getElementById("fileContents");e.innerText="Type here...",document.getElementById("filelabel").classList.add("hide"),document.getElementById("file-new").classList.add("hide"),document.getElementById("button-padding").classList.add("hide")}function stripHtml(e){let t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}function download_txt(){if(fn=document.getElementById("fileName").value,null!==fn&&""!==fn){var e=stripHtml(document.getElementById("fileContents").innerText);if(document.getElementById("encryptme").checked){if(key=document.getElementById("new-pwd").value,null===key||""===key)return;encrypt(e,key).then(e=>{console.log("ersult: "+e);var t=document.getElementById("fileName").value+"(encrypted)";dbit(t,e),displayRecords();var n=document.createElement("a");n.href="data:text/plain,"+e,n.target="_blank",n.download=t,n.click()}).catch(e=>{console.log(e)})}else{var t=document.createElement("a");t.href="data:text/plain,"+encodeURIComponent(e),t.target="_blank",t.download=document.getElementById("fileName").value,t.click()}var n=document.getElementById("localme");n.checked&&(dbit(document.getElementById("fileName").value,e),displayRecords());var l=document.getElementById("cloudme");if(l.checked){var o=[localStorage.getItem("cloud-1"),localStorage.getItem("cloud-2"),localStorage.getItem("cloud-3"),document.getElementById("fileName").value,Math.floor(Date.now()/1e3).toString()];cloudinary(o[0],o[1],o[2],e,o[3],o[4])}}}function isBase64(e){try{return btoa(atob(e))==e}catch(e){return!1}}var button=document.getElementById("dots");button.onclick=function(){function e(){var e=document.getElementById("i1").value;localStorage.setItem("pap",e)}function t(){var e=document.getElementById("i4").value;localStorage.setItem("papAPI",e)}function t(){var e=document.getElementById("i5").value;localStorage.setItem("papEkey",e)}function n(){var e=document.getElementById("i6").value;localStorage.setItem("logo",e)}function l(){var e=document.getElementById("ss").value;localStorage.setItem("papSheet",e),"default.css"===e&&(e="./css/default.min.css"),"modern.css"===e&&(e="./css/modern.min.css"),"corporate.css"===e&&(e="./css/corporate.min.css"),"retro.css"===e&&(e="./css/retro.min.css"),theme.setAttribute("href",e)}function o(){var e=document.getElementById("cloud-1-input").value;localStorage.setItem("cloud-1",e)}function d(){var e=document.getElementById("cloud-2-input").value;localStorage.setItem("cloud-2",e)}function c(){var e=document.getElementById("cloud-3-input").value;localStorage.setItem("cloud-3",e)}document.getElementById("refresher").classList.remove("icon-hide"),document.getElementById("the-options").classList.remove("icon-hide"),document.getElementById("the-sandbox").classList.remove("icon-hide"),document.getElementById("refresher").classList.remove("hide"),document.getElementById("dots").classList.add("hide"),document.getElementById("niv-text").classList.add("hide"),document.getElementById("statistics").classList.add("hide"),document.getElementById("items").innerHTML="",document.getElementById("back-forth").classList.add("hide");const a=document.getElementById("fileName"),m=document.querySelector(".enter-filename");a.addEventListener("keyup",function(){null===a.value||""===a.value?m.classList.remove("hide"):m.classList.add("hide")});const s=document.getElementById("new-pwd"),i=document.querySelector(".enter-password");s.addEventListener("keyup",function(){null===s.value||""===s.value?i.classList.remove("hide"):i.classList.add("hide")});try{var u=document.querySelector(".sidebar");u.classList.add("hide")}catch{}var r=document.getElementById("setting-items");r.classList.remove("hide");var g=document.getElementById("thesettings");g.classList.toggle("hide");const I=document.getElementsByClassName("showme");for(const e of I)e.classList.add("hideme"),e.classList.remove("showme"),document.getElementById("footer").innerText="";document.getElementById("footer").innerText="",hidesplash(),deactivate(),document.getElementById("savecontainer").classList.add("hide"),document.getElementById("thesettings").classList.remove("hide"),document.getElementById("i1").value=localStorage.getItem("pap"),document.getElementById("i4").value=localStorage.getItem("papAPI"),document.getElementById("i5").value=localStorage.getItem("papEkey"),document.getElementById("i6").value=localStorage.getItem("logo"),document.getElementById("ss").value=localStorage.getItem("papSheet"),document.getElementById("pname").value=localStorage.getItem("papName"),document.getElementById("cloud-1").value=localStorage.getItem("cloud-1"),document.getElementById("cloud-2").value=localStorage.getItem("cloud-2"),document.getElementById("cloud-3").value=localStorage.getItem("cloud-3"),document.getElementById("i1").addEventListener("keyup",e),document.getElementById("i4").addEventListener("keyup",t),document.getElementById("i5").addEventListener("keyup",t),document.getElementById("i6").addEventListener("keyup",n),document.getElementById("ss").addEventListener("keyup",l),document.getElementById("cloud-1").addEventListener("keyup",o),document.getElementById("cloud-2").addEventListener("keyup",d),document.getElementById("cloud-3").addEventListener("keyup",c)};var md="help.md",tt="Q-Viewer",hh="Help",defaultLogo="default-logo.svg",splashscr="<div><h1>Welcome to the splash screen</h1><p>Tell your customers what you want</div>";if(splashscr="",document.getElementById("footer").innerText="",document.getElementById("splash").innerHTML=splashscr,localStorage.hasOwnProperty("papName")&&null!==localStorage.getItem("papName")){var pn=localStorage.getItem("papName");document.getElementById("namer").innerText=pn}else localStorage.setItem("papName",hh),document.getElementById("namer").innerText=hh;if(document.getElementById("cloud-1-input").value=localStorage.getItem("cloud-1"),document.getElementById("cloud-2-input").value=localStorage.getItem("cloud-2"),document.getElementById("cloud-3-input").value=localStorage.getItem("cloud-3"),localStorage.getItem(""===localStorage.getItem("pap"))&&(localStorage.clear("pap"),localStorage.setItem("pap",md)),""===localStorage.getItem("pap")&&localStorage.clear("pap"),localStorage.hasOwnProperty("pap")&&null!==localStorage.getItem("pap")?md=localStorage.getItem("pap"):localStorage.setItem("pap",md),localStorage.getItem("logo")){var oldss=localStorage.getItem("logo");document.getElementById("logo").innerHTML="<image class='logo' src='"+oldss+"' />"}else localStorage.setItem("logo",defaultLogo),document.getElementById("logo").innerHTML="<image class='logo' src='"+defaultLogo+"' />";const thetitle=tt;document.getElementById("tit").innerText=thetitle;const fileInput=document.getElementById("fileInput"),fileContents=document.getElementById("fileContents");fileInput.addEventListener("change",function(){const e=fileInput.files[0],t=new FileReader;t.addEventListener("load",function(){chrome.runtime.getPackageDirectoryEntry(function(e){}),fileContents.textContent=t.result,document.getElementById("savecontainer").classList.remove("hide"),document.getElementById("filelabel").classList.add("hide"),document.getElementById("file-new").classList.add("hide"),document.getElementById("button-padding").classList.add("hide")}),t.readAsText(e)});const nbutton=document.getElementById("file-new");nbutton.addEventListener("click",handleClick);const thefileInput=document.getElementById("fileInput"),fileName=document.getElementById("fileName");thefileInput.addEventListener("change",()=>{fileName.textContent=thefileInput.files[0].name});const checkbox=document.getElementById("encryptme");checkbox.addEventListener("click",function(){this.checked?(document.getElementById("new-pwd-container").classList.remove("hide"),document.getElementById("new-pwd-container").classList.add("show")):(document.getElementById("new-pwd-container").classList.add("hide"),document.getElementById("new-pwd-container").classList.remove("show"))});const checkbox2=document.getElementById("cloudme");checkbox2.addEventListener("click",function(){this.checked?(document.getElementById("cloud-container").classList.remove("hide"),document.getElementById("cloud-container").classList.add("show")):(document.getElementById("cloud-container").classList.add("hide"),document.getElementById("cloud-container").classList.remove("show"))}),document.getElementById("downwego").addEventListener("click",download_txt);